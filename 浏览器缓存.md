# 浏览器缓存

## 一、Cookie

#### 1.简介
* Cookie的本职工作并非本地存储，而是“维持状态”
* 在浏览器和服务器间来回传递
* 某些网站为了辨别用户身份而储存在用户本地终端上的数据(通常经过加密)。 cookie是服务端生成，客户端进行维护和存储。
* 以键值对的形式存在

#### 2.应用场景
* 记住密码，下次自动登录

#### 3.原理
![life circle](/images/cookie-gen.png)
Cookie的过期时间、域、路径、有效期、适用站点都可以根据需要来指定。

```js
document.cookie="userName=hello"
```
#### 4.其他
* Cookie 不够大，小限制在4KB左右（每一个name=value的value值大概在4k）
* 过多的 Cookie 会带来巨大的性能浪费（Cookie 是紧跟域名的，同一个域名下的所有请求，都会携带 Cookie。）
* 由于在HTTP请求中的Cookie是明文传递的，所以安全性成问题，除非用HTTPS

<br>

## 二、LocalStorage
#### 1.简介
* 保存的数据长期存在，下一次访问该网站的时候，网页可以直接读取以前保存的数据
* 大小为5M左右
* 仅在客户端使用，不和服务端进行通信
* 以键值对的形式存在，所有的数据都是以文本格式保存(只能存储字符串)

#### 2.用法
```js
localStorage.setItem("name","Jack")
localStorage.getItem("name") // "Jack"
```

#### 3.应用场景
* 考虑到 LocalStorage 的特点之一是持久，有时我们更倾向于用它来存储一些内容稳定的资源。

<br>

## 三、SessionStorage
#### 1.简介
* 会话级别的浏览器存储
* 大小为5M左右
* 仅在客户端使用，不和服务端进行通信
* 以键值对的形式存在，所有的数据都是以文本格式保存(只能存储字符串)

#### 2.应用场景
* sessionStorage 可以有效对表单信息进行维护，比如刷新时，表单信息不丢失
* sessionStorage 更适合用来存储生命周期和它同步的会话级别的信息。这些信息只适用于当前会话，当你开启新的会话时，它也需要相应的更新或释放

#### 3.与LocalStorage区别
* localStorage只要在**相同的协议、相同的主机名、相同的端口**下，就能读取/修改到同一份localStorage数据
* sessionStorage比localStorage更严苛一点，除了**协议、主机名、端口**外，还要求在**同一窗口**（也就是浏览器的标签页）下

<br>

## 四、IndexedDB
* 用于客户端存储大量结构化数据
* IndexedDB 是一个运行在浏览器上的非关系型数据库
* 储存空间大，是没有存储上限的（一般来说不会小于 250M）
* 键值对储存，所有类型的数据都可以直接存入，还可以储存二进制数据
* 异步，操作时不会锁死浏览器（LocalStorage的操作是同步的）
* 支持事务
* 同源限制，每一个数据库对应创建它的域名。网页只能访问自身域名下的数据库，而不能访问跨域的数据库


<br>

#### 参考:
https://segmentfault.com/a/1190000018748168
